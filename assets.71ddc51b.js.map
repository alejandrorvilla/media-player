{"version":3,"sources":["assets/MediaPlayer.ts","assets/plugins/AutoPause.ts","assets/plugins/AutoPlay.ts","assets/singleton.ts","assets/index.ts"],"names":[],"mappings":";;;;;;AAEA,ACCA,ACAA,ACHA,IHEA,ACCA,ACAA,ACHA,QDGA,CDAA,AEHA,EHEA;AAAA,ACCA,ACAA,ACHA;AHEA,ACCA,ACAA,ACHA,YHEA,ACCA,ACAA,ACHA;EHKE,ACCA,ACFD,ACDC,SHEA,ACCA,ACFD,ACDC,QDCD,CDEC,AEHA,EHEA,AEDD,CFCa,ACCZ,ACFgB,ACDhB,CAAwB,KHExB,EAAkB;IAChB,ACCA,KDDK,ACCA,KDDL,GAAa,CCCb,GAAiB,EDDE,CAAC,CCCpB,CDDA;ECED,ACHF,ACAQ,EHEL,KAAK,CEFR,CAAA,ACAQ,CAAA,IHEL,GAAe,CEFlB,CAAA,ECAQ,CDAR,CFEwB,CAAC,AGFxB,CDAD,MFEkB,IAAkB,AEFhC,CCAH,CHEE,IEFH,EAAuB;AELxB,IJSI,AITJ,AFME,ACAE,IAAI,CHGC,AGHA,CDAD,CAAC,KAAP,CENF,AFMe,CCAG,CAAC,CHGf,AITJ,EFME,GAAqB,ECAnB,EDAF,ACA2B,MCN7B,CAAA,OAAA,CAAA,eAAA,CAAA,CAAA;EJUG,ACAD,ECHA,ECAI,IDAE,CDGN,ACHO,CDGP,GCHA,ACAa,CAAC,KFGd,CAAA,EEHI,CFGJ,EEHyB,CFGzB,GEH6B,OFGzB,EEHqB,EAArB,EFGJ,EAAuB;AGTzB,EFOE,CAHD,CEJD,AHUI,AEHC,KFGI,MGVT,AHUI,GGVJ,AHUkB,MAAd,SGVJ,CAAA,OAAA,CAAA,qBAAA,CAAA,CAAA;EJUU,ECCN,IAAM,KDDA,CAAA,ECCQ,GAAG,IDDX,ACCe,CDDf,WAAA,GAAR,KCCmB,CACf,KAAK,CDFT,kBCEI,CAAyB,IAAzB,CAA8B,IAA9B,CADe,EAEf;AGZN,EFOA,EFEE,AITF,ADOI,EFMI,EDJN,CEFF,ECAW,EHET,CITF,CHaiB,CDJf,CITF,AHamB,ACNnB,GFEE,AGFkB,CAAC,CFMG,OENpB,GCPJ,CAAA,OAAA,CAAA,oBAAA,CAAA,CAAA;AFCA,CAAA,CCOG,CDPH,ACES,CFSH,CAFe,CAAjB;AGRJ,IJQI,AIRJ,AHeI,KDPK,GCOG,CAAC,EGfb,CJQI,CAAa,CIRjB,EHeI,CAAiB,GDPjB,CAAqB,CCOC,MAAL,CGfrB,AHeiC,CGfjC,CJQ0B,GCOtB,GDPqB,AIRzB,CAAA,CJQgC,YIRhC,CAAA,CAAA;AFQA,ECDA,EFUI,EDRE,CEDN,CAAA,CCDA,GHEY,ACQA,CDRC,ACQA,ECTb,CFCM,CAAW,CEDF,ACDf,IHEM,IEDN,GDSI,CACE,kBADF,EAEE,KAAK,uBAAL,CAA6B,IAA7B,CAAkC,IAAlC,CAFF;AGfJ,ADNA,CAAA,CFyBG,CAfD,AEVF,CHcK,AIRC,CJMF,IINO,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,EJQG,CAJO,CIJJ,OAAO,GAAG,QAAQ,CAAC,cAAT,CAAwB,MAAxB,CAAhB;AACA,ADKA,EFcE,EGnBI,GDKN,CAAA,GCLa,AHmBX,CAAA,EGnBc,CDKhB,GAAe,GFcb,CGnBsB,AHmBtB,CGnBuB,IDKzB,UCLgB,CAAwB,GHmBtC,GGnBc,AHmBd,CGnBF,SHmBsB,OAApB,EAAwD;AGlB1D,EJOE,EIPI,AHmBF,IAAM,KDZR,AIPa,AHmBA,CDZb,EIPgB,AHmBA,ODZhB,ACYuB,CDZvB,AIPwB,AHmBA,CGnBC,AHmBF,CAArB,EDZF,GAAA,QIPgB,CAAwB,GJOxC,SIPgB,CAAlB,EAEA;AACA,IJKI,ACYA,KDZK,ACYA,KDZL,ACYA,CDZW,ACYA,IDZX,CCYgB,CAAC,iBAAN,IAA2B,KAAK,SAA3C;EDXD,ACYA,CDdD,ACWA;AGbF,IAAM,MAAM,GAAG,IAAI,aAAA,CAAA,OAAJ,CAAgB;EJK7B,AIJA,AHiBA,EGjBE,EAAE,KADyB,AHkB7B,CAAA,CDbA,CAAA,OCaA,CAAA,CDbA,CAAA,KAAA,GAAA,YAAA,CCaA,GAAA,YAAA;EGhBA,EJIE,ACaA,KDbK,AIJA,AHiBA,EGjBE,CAAC,EJIR,ACaA,CDbW,ACaA,CGjBC,IJIZ,GCamB,CAAC,EGjBR,CAAA,OAAJ,EAAD,EAAiB,CHiBb,GGjBiB,EHiBY,SGjBZ,AHiB5B,CGjB4B,OAAJ,EAAjB;AAFoB,CAAhB,CJOZ,AIPH,AHoBG,CDfD,ACaA;;AGbD,EJGC,ACcA,KGjBsB,CAAC,GHiBvB,CAAA,CDdA,CAAA,CIHD,GAAkC,GHiBjC,CAAA,CDdA,CAAA,GCcA,GGjBiC,AHiBjC,IDdA,GAAA,GCcM,SDdN,ACcA,EAAe;EGhBf,EJGE,ACcA,IGjBI,CJGC,AIHA,IHiBI,CDdT,AIHF,CJGa,AIHA,CHiBC,IDdZ,CIHF,AHiBmB,EDdE,CAAC,AIHA,GHiBR,CAAY,CDdC,CIHC,CAAC,CHiBf,EDdQ,ACcX,CDdsB,AIHX,EAAtB,AHiBmC,GDdjC,AIHoC,EHiBE,IGjBI,CAAC,CHiBV,CAAY,GGjBT,EAAtC,AHiBmC,EAAjC;AGhBH,CAFA,CJKE,ACcA,CDhBD,ACcA;;AGbD,EJED,ACcA,KGhBwB,CAAC,CJEzB,ACcA,MGhBC,GAAkC,AHgBnC,EDdA,UIFmC;AJrBnC,ACCA,CDDA,ACCA,CGqBE,CJtBF,ACCA,KGqBQ,CAAC,UAAP;AACD,CAFA;AJID,ACcA,ODdA,ACcA,CDdA,ACcA,ODdA,ACcA,GDde,ACcA,SAAf,EDdA;AIAC,SAAyB,CAAC,OAA1B,GAAoC,YAAA,CACpC;AACA,CAFA;;AAID,IAAG,mBAAmB,SAAtB,EAAiC;EAChC,SAAS,CAAC,aAAV,CAAwB,QAAxB,CAAiC,sCAAjC,EAA2C,KAA3C,CAAiD,UAAA,KAAA,EAAK;IACrD,OAAO,CAAC,KAAR,CAAc,KAAK,CAAC,OAApB;EACA,CAFD;AAGA;;AAED,IAAM,CAAC,GAAG,WAAA,CAAA,OAAA,CAAU,WAAV,EAAV;AACA,IAAM,CAAC,GAAG,WAAA,CAAA,OAAA,CAAU,WAAV,EAAV;AAEA,OAAO,CAAC,GAAR,CAAY,UAAZ,EAAwB,CAAC,KAAK,CAA9B","file":"assets.71ddc51b.js","sourceRoot":"..","sourcesContent":["import { PluginPlayer } from \"./model/model\";\r\n\r\nclass MediaPlayer {\r\n  media: HTMLVideoElement;\r\n  private plugins: PluginPlayer[];\r\n  constructor(config) {\r\n    this.media = config.el;\r\n    this.plugins = config.plugins || [];\r\n\r\n    this.initPlugins();\r\n  }\r\n  private initPlugins() {\r\n    this.plugins.forEach((plugin) => {\r\n      plugin.run(this);\r\n    });\r\n  }\r\n  play() {\r\n    this.media.play();\r\n  }\r\n  pause() {\r\n    this.media.pause();\r\n  }\r\n  toggleMute() {\r\n    this.media.muted = !this.media.muted;\r\n  }\r\n}\r\n\r\nexport default MediaPlayer;\r\n","import MediaPlayer from \"../MediaPlayer\";\r\nimport { PluginPlayer } from \"../model/model\";\r\n\r\nclass AutoPause implements PluginPlayer{\r\n  private threshold: number;\r\n  private player: MediaPlayer;\r\n  constructor() {\r\n    this.threshold = 0.25;\r\n  }\r\n\r\n  run(player: MediaPlayer) {\r\n    this.player = player;\r\n    const observer = new IntersectionObserver(\r\n      this.handlerIntersection.bind(this),\r\n      {\r\n        threshold: this.threshold,\r\n      }\r\n    );\r\n\r\n    observer.observe(this.player.media);\r\n\r\n    document.addEventListener(\r\n      \"visibilitychange\",\r\n      this.handlerVisibilityChange.bind(this)\r\n    );\r\n  }\r\n\r\n  handlerIntersection(entries: IntersectionObserverEntry[]) {\r\n    const entry = entries[0];\r\n    this.pause(entry.intersectionRatio >= this.threshold);\r\n  }\r\n\r\n  handlerVisibilityChange() {\r\n    this.pause(document.visibilityState === \"visible\");\r\n  }\r\n\r\n  pause(isVisible) {\r\n    isVisible ? this.player.play() : this.player.pause();\r\n  }\r\n}\r\n\r\nexport default AutoPause;\r\n","import MediaPlayer from \"../MediaPlayer\";\r\nimport { PluginPlayer } from \"../model/model\";\r\n\r\nclass AutoPlay implements PluginPlayer {\r\n\tconstructor() { }\r\n\trun(player: MediaPlayer) {\r\n\t\tplayer.media.muted = true;\r\n\t\tplayer.play();\r\n\t}\r\n}\r\n\r\n\r\nexport default AutoPlay;","class Singleton {\r\n  private static instance: Singleton;\r\n\r\n  private constructor() {}\r\n\r\n  static getInstance() {\r\n    if (!Singleton.instance) {\r\n      Singleton.instance = new Singleton()\r\n    }\r\n    return Singleton.instance\r\n  }\r\n}\r\n\r\nexport default Singleton;\r\n","import MediaPlayer from \"./MediaPlayer\";\r\nimport AutoPause from \"./plugins/AutoPause\";\r\nimport AutoPlay from \"./plugins/AutoPlay\";\r\nimport LoremIpsum from \"./LoremIpsum.js\";\r\nimport Singleton from \"./singleton\";\r\n\r\nconst video = document.querySelector(\"video\");\r\nconst btnPlay = document.getElementById(\"play\");\r\nconst btnMute = document.getElementById(\"mute\");\r\nconst btnCancel = document.getElementById(\"cancelLoad\");\r\n\r\n//const loremIpsum = new LoremIpsum(document.getElementById(\"lorempIpsum\"));\r\n//loremIpsum.render();\r\n\r\nconst player = new MediaPlayer({\r\n  el: video,\r\n  plugins: [new AutoPlay(), new AutoPause()],\r\n});\r\n\r\n(btnPlay as HTMLElement).onclick = () => {\r\n  player.media.paused ? player.play() : player.pause();\r\n};\r\n\r\n(btnMute as HTMLElement).onclick = () => {\r\n  player.toggleMute();\r\n};\r\n\r\n(btnCancel as HTMLElement).onclick = () => {\r\n\t//loremIpsum.cancelLoad();\r\n}\r\n\r\nif('serviceWorker' in navigator) {\r\n\tnavigator.serviceWorker.register('/sw.js').catch(error => {\r\n\t\tconsole.error(error.message);\r\n\t})\r\n}\r\n\r\nconst a = Singleton.getInstance()\r\nconst b = Singleton.getInstance()\r\n\r\nconsole.log(\"a === b?\", a === b)\r\n"]}